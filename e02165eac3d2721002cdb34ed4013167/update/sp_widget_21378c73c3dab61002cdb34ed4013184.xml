<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller = function($window, $location) {
  var c = this;
 
  // Set the current page based on the URL to handle the 'active' class
  c.currentPage = $location.search().id || 'dashboard';
 
  c.navigate = function(pageId) {
    // If the target is 'art', navigate to the portal root
    if (pageId === 'art') {
      $window.location.href = '/art';
    } else {
      // Otherwise, navigate to the specific page ID within the portal
      $window.location.href = '/art?id=' + pageId;
    }
  };
};]]></client_script>
        <controller_as>c</controller_as>
        <css>/* DASHBOARD THEME: Deep Purple &amp; Glassmorphism */
.asset-dashboard-root {
  display: flex;
  min-height: 100vh;
  width: 100%;
  background: linear-gradient(135deg, #1a0b2e 0%, #31135e 100%);
  color: #fff;
  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
}
 
/* SIDEBAR STYLES (Keep existing sidebar code here) */
.side-nav {
  width: 260px;
  background: rgba(0, 0, 0, 0.2);
  backdrop-filter: blur(20px);
  border-right: 1px solid rgba(255, 255, 255, 0.1);
  display: flex;
  flex-direction: column;
  padding: 30px 0;
  position: relative;
  .nav-header {
    display: flex; align-items: center; padding: 0 25px; margin-bottom: 50px;
    .logo-box { background: #7c3aed; padding: 8px 10px; border-radius: 8px; margin-right: 12px; }
    .brand-name { font-weight: 700; font-size: 1.1rem; }
  }
  .nav-links {
    list-style: none; padding: 0 15px; flex-grow: 1;
    li {
      padding: 14px 20px; margin-bottom: 8px; border-radius: 12px; display: flex; align-items: center; cursor: pointer; transition: 0.3s; color: rgba(255,255,255,0.6);
      i { margin-right: 15px; width: 20px; text-align: center; }
&amp;:hover, &amp;.active { background: rgba(124, 58, 237, 0.2); color: #fff; i { color: #a78bfa; } }
    }
  }
  .nav-footer {
    padding: 20px; border-top: 1px solid rgba(255,255,255,0.05);
    .user-pill {
      display: flex; align-items: center; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 12px;
      .user-init { width: 35px; height: 35px; background: #4c1d95; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; margin-right: 10px; }
    }
  }
  .accent-glow { position: absolute; right: 0; top: 0; width: 2px; height: 100%; background: linear-gradient(to bottom, #7c3aed, #ec4899); }
}
 
/* MAIN BODY */
.main-body {
  flex-grow: 1; padding: 40px 60px; overflow-y: auto;
  .content-header {
    margin-bottom: 40px;
    h1 { font-weight: 700; font-size: 2.2rem; margin-bottom: 10px; }
    .project-description { color: rgba(255,255,255,0.6); font-size: 1.1rem; max-width: 800px; line-height: 1.6; }
  }
}
 
/* SHARED GLASS CARDS */
.glass-card {
  background: rgba(255, 255, 255, 0.04);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 20px;
  padding: 30px;
}
 
/* STAT CARDS (Row 1) */
.stats-row {
  display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; margin-bottom: 30px;
  .stat-card {
    text-align: center;
    i { font-size: 1.8rem; margin-bottom: 15px; display: block; }
    .val { font-size: 2.5rem; font-weight: 700; }
    .lbl { opacity: 0.6; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 1px; }
  }
}
 
/* ACTION GRID (Row 2) */
.action-grid {
  display: grid; grid-template-columns: 2fr 1fr; gap: 25px;
  .left-col { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }
}
 
/* VIBRANT CLICKABLE CARDS STYLING */
.big-action {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  cursor: pointer; min-height: 220px; text-align: center; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  position: relative; overflow: hidden;
 
  .action-icon-wrap {
    width: 60px; height: 60px; border-radius: 15px; background: rgba(255,255,255,0.1);
    display: flex; align-items: center; justify-content: center; font-size: 1.8rem; margin-bottom: 20px;
  }
  h3 { font-size: 1.3rem; font-weight: 600; margin-bottom: 5px; }
  .action-subtext { font-size: 0.85rem; opacity: 0.6; }
 
  &amp;:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.3);
    .action-icon-wrap { background: #fff; color: #1a0b2e; }
  }
}
 
/* Color Variation 1: Request Card (Deep Purple/Violet Tint) */
.request-card {
  background: linear-gradient(145deg, rgba(124, 58, 237, 0.3), rgba(124, 58, 237, 0.1));
  border: 1px solid rgba(167, 139, 250, 0.3);
&amp;:hover {
    background: linear-gradient(145deg, rgba(124, 58, 237, 0.5), rgba(124, 58, 237, 0.2));
    border: 1px solid rgba(167, 139, 250, 0.6);
  }
}
 
/* Color Variation 2: Track Card (Indigo/Blue Tint) */
.track-card {
  background: linear-gradient(145deg, rgba(79, 70, 229, 0.3), rgba(79, 70, 229, 0.1));
  border: 1px solid rgba(129, 140, 248, 0.3);
&amp;:hover {
    background: linear-gradient(145deg, rgba(79, 70, 229, 0.5), rgba(79, 70, 229, 0.2));
    border: 1px solid rgba(129, 140, 248, 0.6);
  }
}
 
/* CHART CARD */
.chart-card {
  text-align: center;
  .circular-progress {
    width: 130px; height: 130px; border-radius: 50%; border: 8px solid rgba(255,255,255,0.1);
    margin: 25px auto; display: flex; align-items: center; justify-content: center;
    .inner-circle { font-size: 1.8rem; font-weight: 700; }
  }
}
 
/* SHARED COLORS */
.yellow { color: #fbbf24; }
.green { color: #34d399; }
.red { color: #f87171; }</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>asset_dashboard</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>Asset Dashboard</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
    var user = gs.getUser();
    data.user_first_name = user.getFirstName();
    data.user_initials = (user.getFirstName().charAt(0) + user.getLastName().charAt(0)).toUpperCase();
    var userId = gs.getUserID();
    var requestTable = 'x_1862743_asset_re_asset_request_table';
 
    function getCount(query) {
        var gr = new GlideAggregate(requestTable);
        // We use 'opened_by' because it's inherited from the Task table
        gr.addEncodedQuery(query + '^opened_by=' + userId); 
        gr.addAggregate('COUNT');
        gr.query();
        if (gr.next()) return parseInt(gr.getAggregate('COUNT'));
        return 0;
    }
 
    data.stats = {
        // Internal values for Task-based approval are usually lowercase
        pending: getCount('approval_status=requested'), 
        approved: getCount('approval_status=approved'),  
        rejected: getCount('approval_status=rejected')   
    };
 
    var total = data.stats.approved + data.stats.rejected + data.stats.pending;
    data.success_rate = (total > 0) ? Math.round((data.stats.approved / total) * 100) : 0;
    data.project_name = "IT Asset Management";
    data.project_desc = "A centralized hub for real-time hardware tracking, automated approvals, and lifecycle management.";
})();]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2026-01-14 05:31:08</sys_created_on>
        <sys_id>21378c73c3dab61002cdb34ed4013184</sys_id>
        <sys_mod_count>46</sys_mod_count>
        <sys_name>Asset Dashboard</sys_name>
        <sys_package display_value="Asset Request and Tracking" source="x_1862743_asset_re">e02165eac3d2721002cdb34ed4013167</sys_package>
        <sys_policy/>
        <sys_scope display_value="Asset Request and Tracking">e02165eac3d2721002cdb34ed4013167</sys_scope>
        <sys_update_name>sp_widget_21378c73c3dab61002cdb34ed4013184</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2026-01-15 11:49:36</sys_updated_on>
        <template><![CDATA[<div class="asset-dashboard-root">

  <aside class="side-nav">
    <div class="nav-header">
      <div class="logo-box"><i class="fa fa-cubes"></i></div>
      <span class="brand-name">{{data.project_name}}</span>
    </div>

    <ul class="nav-links">
      <li class="active" ng-class="{'active': c.currentPage == 'dashboard'}" ng-click="c.navigate('art')">
        <i class="fa fa-th-large"></i> <span>Dashboard</span>
      </li>
      <li ng-click="c.navigate('browse_and_request_page')">
        <i class="fa fa-plus-circle"></i> <span>Request Asset</span>
      </li>
      <li ng-click="c.navigate('track_my_request_page')">
        <i class="fa fa-search"></i> <span>Track Requests</span>
      </li>
      <li ng-click="c.navigate('my_assigned_inventory_page')">
        <i class="fa fa-laptop"></i> <span>My Assigned Assets</span>
      </li>
       <li ng-click="c.navigate('admin_approval_page')">
        <i class="fa fa-check-square-o"></i> <span>Admin Approval</span>
      </li>
      <li ng-click="c.navigate('executive_analytics_page')">
        <i class="fa fa-bar-chart"></i> <span>Analytics</span>
      </li>
    </ul>

    <div class="nav-footer">
      <div class="user-pill">
        <div class="user-init">{{data.user_initials}}</div>
        <div class="user-info">
          <div class="u-name">{{data.user_first_name}}</div>
          <div class="u-role">Administrator</div>
        </div>
      </div>
    </div>
    <div class="accent-glow"></div>
  </aside>

  <main class="main-body">
    <div class="content-header">
      <h1>Dashboard Overview</h1>
      <p class="project-description">{{data.project_desc}}</p>
    </div>

    <div class="stats-row">
      <div class="glass-card stat-card">
        <i class="fa fa-clock-o yellow"></i>
        <div class="val">{{data.stats.pending}}</div> <div class="lbl">Pending</div>
      </div>

      <div class="glass-card stat-card">
        <i class="fa fa-check-circle green"></i>
        <div class="val">{{data.stats.approved}}</div> <div class="lbl">Approved</div>
      </div>

      <div class="glass-card stat-card">
        <i class="fa fa-times-circle red"></i>
        <div class="val">{{data.stats.rejected}}</div> <div class="lbl">Rejected</div>
      </div>
    </div>


    <div class="action-grid">
      <div class="left-col">
        <div class="glass-card big-action request-card" ng-click="c.navigate('browse_and_request_page')">
          <div class="action-icon-wrap"><i class="fa fa-plus"></i></div>
          <h3>Request New Asset</h3>
          <span class="action-subtext">Browse catalog & submit</span>
        </div>

        <div class="glass-card big-action track-card" ng-click="c.navigate('track_my_request_page')">
          <div class="action-icon-wrap"><i class="fa fa-search"></i></div>
          <h3>Track My Requests</h3>
          <span class="action-subtext">View status updates</span>
        </div>
      </div>

      <div class="right-col">
        <div class="glass-card chart-card">
          <h3>Approval Rate</h3>
          <div class="circular-progress">
            <div class="inner-circle">{{data.success_rate}}%</div>
          </div>
          <p>Total asset request success metrics for your account.</p>
        </div>
      </div>
    </div>
  </main>
</div>]]></template>
    </sp_widget>
</record_update>
